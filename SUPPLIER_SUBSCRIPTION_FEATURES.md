# ๐ฏ ูุธุงู ุงูุงุดุชุฑุงูุงุช ูุงูููุฒุงุช ุงููุชูุฏูุฉ (Supplier Subscription Features)

## โ ุงููุธุงู ุงููุทุจู - Feature Management per Supplier

---

## ๐ ุงูููุฒุงุช ุงููุชุงุญุฉ (9 ููุฒุงุช)

### ๐ 1. ุงูุชุญููู ูุงูุชูุงุฑูุฑ (Analytics & Reporting)

#### ุชูุงุฑูุฑ ุงูุชุญููู ุงูููุณุนุฉ (post_award_reports)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- ูุตูู ูุชูุฑูุฑ ููุตู ุจุนุฏ ุงูุชูุงุก ุงูููุงูุตุฉ
- ููุงุฑูุฉ ุฃุฏุงุฆู ุจูุชูุณุท ุงูุณูู
- ุฑุคูุฉ ููุงุท ุงูุถุนู ูุงูููุฉ

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ุฑุคูุฉ ููุท ูุชูุฌุฉ ุงูุชุฑุณูุฉ (ูุงุฒ/ูู ููุฒ)
- ูุง ูุฑู ูุนูููุงุช ููุตูุฉ

#### ููุญุฉ ุฅุญุตุงุฆูุงุช ุงูุฃุฏุงุก (performance_analytics)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- Dashboard ูุนุฑุถ KPIs:
  - ูุนุฏู ุงูููุฒ (Win Rate)
  - ูุณุจุฉ ุงูุงูุชุซุงู (Compliance Rate)
  - ูุชูุณุท ูููุฉ ุงูุนุฑูุถ
  - ููุช ุงูุงุณุชุฌุงุจุฉ

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ูุง ุชูุฌุฏ ููุญุฉ ุชุญูู

#### ุชุตุฏูุฑ ุณุฌู ุงููุนุงููุงุช (export_transactions)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- ุชุตุฏูุฑ ุนุฑูุถ ูููุงุชูุฑ (CSV/JSON)
- ุชุญููู ุฐุงุชู ุฏุงุฎูู

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ุนุฑุถ ุฏุงุฎู ุงูููุตุฉ ููุท

---

### ๐ 2. ุงูุชูุงูู ูุงูููุงุกุฉ (Integration & Efficiency)

#### ุงูุชูุงูู ูุน ุฃูุธูุฉ ERP (erp_integration)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- API access ููููุฑุฏ
- ุฏูุน ุงูููุงุชูุฑ ูุฃูุงูุฑ ุงูุดุฑุงุก ูุจุงุดุฑุฉ ูู ูุธุงูู (SAP/Oracle)
- ุชูุงูู ุขูู ูุงูู

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ุฅุฏุฎุงู ูุฏูู ุฃู ุชูุฒูู ูุฑูุน ูุฏูู

#### ุนุฏุฏ ุงูููุชุฌุงุช (extended_products)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- ุญุฏ ุฃูุตู: 500 ููุชุฌ/ุฎุฏูุฉ ูู ุงููุชุงููุฌ

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ุญุฏ ุฃูุตู: 50 ููุชุฌ ููุท

#### ุณุนุฉ ุงูุชุฎุฒูู ุงูุฅุถุงููุฉ (extra_storage)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- ุณุนุฉ ุชุฎุฒูู: 50 GB

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ุณุนุฉ ุชุฎุฒูู: 5 GB

---

### ๐ก๏ธ 3. ุงูุชูุจููุงุช ูุงูุฃูุงู (Alerts & Security)

#### ุงูุชูุจููุงุช ุงูููุฑูุฉ (realtime_alerts)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- ุชูุจููุงุช ูู ุงูููุช ุงููุนูู (In-App/Email)
- ุนูุฏ ูุดุฑ ููุงูุตุฉ ุชุทุงุจู ุงูุชูุงูุงุชู

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ููุฎุต ูููู ุฃู ุฃุณุจูุนู ููุท

#### ุงููุณุชุฎุฏููู ุงููุชุนุฏุฏูู (team_members)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- ุฅุถุงูุฉ ุฃุนุถุงุก ูุฑูู ูููุณ ุงูุญุณุงุจ
- ุชุนููู ุฃุฏูุงุฑ ูุฑุนูุฉ (Finance, Sales, etc)

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ูุณุชุฎุฏู ุฑุฆูุณู ูุงุญุฏ ููุท

#### ุงูุฏุนู ุงูููู ุงููุจุงุดุฑ (priority_support)
**ุนูุฏ ุงูุชูุนูู (Premium)**:
- ููุงุฉ ุฏุนู ูุจุงุดุฑุฉ (Chat Support)
- ุฃููููุฉ ุนุงููุฉ

**ุนูุฏ ุงูุฅูุบุงุก (Basic)**:
- ูุธุงู ุงูุชุฐุงูุฑ ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

---

## ๐ API Endpoints

### 1. ุชูุนูู ููุฒุฉ ูููุฑุฏ ูุนูู:
```
PUT /api/admin/supplier-features/enable
Authorization: Bearer {token}
Content-Type: application/json

{
  "supplier_id": 123,
  "feature_key": "erp_integration",
  "reason": "Plan upgrade to Premium",
  "expires_at": "2026-11-21T23:59:59Z"  // ุงุฎุชูุงุฑู
}
```

**ุงูุงุณุชุฌุงุจุฉ**:
```json
{
  "success": true,
  "message": "Feature \"ุงูุชูุงูู ูุน ุฃูุธูุฉ ERP\" enabled for supplier 123",
  "feature": {
    "id": 1,
    "supplier_id": 123,
    "feature_key": "erp_integration",
    "feature_name": "ุงูุชูุงูู ูุน ุฃูุธูุฉ ERP",
    "category": "integration",
    "is_enabled": true,
    "enabled_at": "2025-11-21T10:30:00Z",
    "expires_at": "2026-11-21T23:59:59Z"
  }
}
```

### 2. ุฅูุบุงุก ุชูุนูู ููุฒุฉ:
```
PUT /api/admin/supplier-features/disable
Authorization: Bearer {token}

{
  "supplier_id": 123,
  "feature_key": "erp_integration",
  "reason": "Plan downgrade to Basic"
}
```

### 3. ุงูุญุตูู ุนูู ุฌููุน ุงูููุฒุงุช ุงููุชุงุญุฉ:
```
GET /api/admin/supplier-features/available
Authorization: Bearer {token}
```

**ุงูุงุณุชุฌุงุจุฉ**:
```json
{
  "success": true,
  "total": 9,
  "grouped": {
    "analytics": [
      {
        "key": "post_award_reports",
        "name": "ุชูุงุฑูุฑ ุงูุชุญููู ุงูููุณุนุฉ",
        "category": "analytics"
      }
    ],
    "integration": [...],
    "alerts": [...]
  }
}
```

### 4. ุงูุญุตูู ุนูู ููุฒุงุช ููุฑุฏ ูุนูู:
```
GET /api/admin/supplier-features/supplier/123
Authorization: Bearer {token}
```

### 5. ุงูุญุตูู ุนูู ุงูููุฒุงุช ุงููุดุทุฉ ููุท:
```
GET /api/admin/supplier-features/supplier/123/active
Authorization: Bearer {token}
```

### 6. ุงูุชุญูู ูู ููุฒุฉ ูุญุฏุฏุฉ:
```
GET /api/admin/supplier-features/supplier/123/check/erp_integration
Authorization: Bearer {token}
```

**ุงูุงุณุชุฌุงุจุฉ**:
```json
{
  "success": true,
  "supplier_id": 123,
  "feature_key": "erp_integration",
  "is_enabled": true
}
```

### 7. ุงูุญุตูู ุนูู ููุฒุงุช ุจูุฆุฉ:
```
GET /api/admin/supplier-features/category/analytics
Authorization: Bearer {token}
```

---

## ๐ป ุงูุงุณุชุฎุฏุงู ูู ุงูููุฏ

### 1. ุงูุชุญูู ูู ุงูููุฒุฉ ูู Service:

```javascript
const SubscriptionService = require('../services/SubscriptionService');

async function generateReport(supplierId) {
    const hasFeature = await SubscriptionService.isSupplierFeatureEnabled(
        supplierId, 
        'post_award_reports'
    );
    
    if (!hasFeature) {
        throw new Error('ุงูููุฑุฏ ูุญุชุงุฌ ูุชุฑููุฉ ุฎุทุชู ูููุตูู ููุชูุงุฑูุฑ');
    }
    
    // ุชูููุฏ ุงูุชูุฑูุฑ
}
```

### 2. ุงุณุชุฎุฏุงู Middleware ูู Routes:

```javascript
const supplierFeatureMiddleware = require('../middleware/supplierFeatureMiddleware');

router.get('/reports/:supplier_id',
    supplierFeatureMiddleware('post_award_reports'),
    (req, res) => {
        // ุงูุชูุฑูุฑ ูุชู ุนุฑุถู ููุท ุฅุฐุง ูุงูุช ุงูููุฒุฉ ููุนูุฉ
    }
);
```

### 3. ุงูุชุญูู ูู Controller:

```javascript
async generateAnalytics(req, res) {
    const { supplier_id } = req.params;
    
    const hasAnalytics = await SubscriptionService
        .isSupplierFeatureEnabled(supplier_id, 'performance_analytics');
    
    if (!hasAnalytics) {
        return res.status(403).json({
            error: 'Feature not available',
            message: 'Analytics dashboard requires Premium plan'
        });
    }
    
    // ุชูููุฏ ุงูุชุญูููุงุช
}
```

---

## ๐ฏ ุณููุงุฑูููุงุช ูุงูุนูุฉ

### ุงูุณููุงุฑูู 1: ุชุฑููุฉ ููุฑุฏ ุฅูู Premium

```
ุงููุดุชุฑู:
โโ ูุฑูู ุงูููุฑุฏ #123 ุฅูู ุฎุทุฉ Premium
โโ ุงููุณุคูู ูููุฑ: ุชูุนูู ุฌููุน ููุฒุงุช Premium

ุงููุชูุฌุฉ:
โโ ุชูุนูู: post_award_reports
โโ ุชูุนูู: performance_analytics
โโ ุชูุนูู: export_transactions
โโ ุชูุนูู: erp_integration
โโ ุชูุนูู: extended_products (max 500)
โโ ุชูุนูู: extra_storage (50 GB)
โโ ุชูุนูู: realtime_alerts
โโ ุชูุนูู: team_members
โโ ุชูุนูู: priority_support

ุงูููุฑุฏ ุงูุขู:
โ ูุฑู ุชูุงุฑูุฑ ููุตูุฉ
โ ูุตุฏุฑ ุงูุจูุงูุงุช
โ ูุฑุณู ุงูููุงุชูุฑ ูู ERP
โ ูุถูู ูุฑููู
โ ูุญุตู ุนูู ุฏุนู ูุจุงุดุฑ
```

### ุงูุณููุงุฑูู 2: ุฑุฌูุน ููุฑุฏ ุฅูู Basic

```
ุงูุญุงูุฉ ุงูุณุงุจูุฉ: Premium (ูู ุงูููุฒุงุช ููุนูุฉ)
ุงูุฅุฌุฑุงุก: ุฑุฌูุน ุงูุฎุทุฉ ุฅูู Basic

ุงูุชุฃุซูุฑ ุงูููุฑู:
โโ ุฅูุบุงุก: post_award_reports
โโ ุฅูุบุงุก: performance_analytics
โโ ุฅูุบุงุก: export_transactions
โโ ุฅูุบุงุก: erp_integration
โโ ุฅูุฎูุงุถ max_products ูู 500 โ 50
โโ ุฅูุฎูุงุถ storage ูู 50GB โ 5GB
โโ ุฅูุบุงุก: realtime_alerts
โโ ุฅูุบุงุก: team_members
โโ ุฅูุบุงุก: priority_support

ุงูุญูุงูุฉ ูู ุงูููุฏุงู:
โ ุงูููุงูุตุงุช ุงูููุชููุฉ ูุง ุชูุญุฐู
โ ุงูููุงุชูุฑ ูุงูุนุฑูุถ ุงูููุฌูุฏุฉ ุชุจูู
โ ููุท ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ุบูุฑ ูุชุงุญุฉ
```

### ุงูุณููุงุฑูู 3: ุชูุนูู ูุคูุช (ูุน ุงูุชูุงุก ุตูุงุญูุฉ)

```
ุงููุณุคูู ููุนูู premium_analytics ููุฏุฉ ุดูุฑ ูุงุญุฏ:

{
  "supplier_id": 456,
  "feature_key": "performance_analytics",
  "reason": "Trial for 1 month",
  "expires_at": "2025-12-21T23:59:59Z"
}

ุจุนุฏ ุชุงุฑูุฎ ุงูุงูุชูุงุก:
โโ ุงูููุฒุฉ ุชููุบู ุชููุงุฆูุงู
โโ ุงูููุฑุฏ ูููุฏ ุงููุตูู
โโ ุฅุดุนุงุฑ ููุฑุณู ููููุฑุฏ
```

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### ูู ููููู ุชูุนูู/ุชุนุทูู ุงูููุฒุงุช:
- โ ADMIN ููุท (checkPermission('manage_features'))

### ุงูุญูุงูุฉ:
- โ ุชุณุฌูู ูู ูุนู ุงูุชูุนูู (admin_id)
- โ ุชุณุฌูู ุงูุณุจุจ (reason)
- โ ุชุณุฌูู ุงูุชุงุฑูุฎ (enabled_at, expires_at)
- โ ููุน ุชุนุฏูู ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

| ุงููููุงุณ | ุงููููุฉ |
|--------|--------|
| **ุนุฏุฏ ุงูููุฒุงุช** | 9 ููุฒุงุช |
| **ุงููุฆุงุช** | 3 (Analytics, Integration, Alerts) |
| **ููุช ุงูุชูุนูู** | ููุฑู |
| **ุงูุญูุงูุฉ** | ูุงููุฉ |

---

## ๐ ุงูุฎูุงุตุฉ

โ **ูุธุงู ุงุดุชุฑุงูุงุช ูููุฒุงุช ูุชูุงูู**
โ **ุชุญูู ูุงูู ูู ุงููุณุคูู**
โ **9 ููุฒุงุช ูุชูุฏูุฉ ูุงุจูุฉ ููุชุญูู**
โ **ุญูุงูุฉ ูู ููุฏุงู ุงูุจูุงูุงุช**
โ **ุชูุนูู/ุฅูุบุงุก ููุฑู**

**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุฅูุชุงุฌ ๐

